{{cprTrace "CPR-CYBERWARE.HBS"}}
{{!-- Cyberware Item Setting --}}

{{!-- Type Setting --}}
<li class="item flexrow">
    <div class="item flexrow setting-name text-nowrap">
        {{localize "CPR.global.generic.type"}}
    </div>
    <div class="item flexrow setting-value text-nowrap item-end">
        {{#if this.editable}}
        <select name="data.type" data-dtype="{{data.data.type}}">
            {{#select data.data.type}}
                {{#each (cprFindConfigObj "cyberwareTypeList") as |type t|}}
                    <option value="{{t}}">{{localize type}}</option>
                {{/each}}
            {{/select}}
        </select>
        {{else}}
            <span class="text-flex-end">{{localize (cprFindConfigValue "cyberwareTypeList" data.data.type)}}</span>
        {{/if}}

    </div>
</li>

{{!-- Install Location Settings --}}
<li class="item flexrow">
    <div class="item flexrow setting-name text-nowrap">
        {{localize "CPR.global.generic.install"}}
    </div>
    <div class="item flexrow setting-value text-nowrap item-end">
        {{#if this.editable}}
            <select name="data.install" data-dtype="{{data.data.install}}">
                {{#select data.data.install}}
                    {{#each (cprFindConfigObj "cyberwareInstallList") as |install i|}}
                        <option value="{{i}}">{{localize install}}</option>
                    {{/each}}
                {{/select}}
            </select>
        {{else}}
            <span class="text-flex-end">{{localize (cprFindConfigValue "cyberwareInstallList" data.data.install)}}</span>
        {{/if}}
    </div>
</li>

{{!- Static Humanity Loss Settings --}}
<li class="item flexrow">
    <div class="item flexrow setting-name text-nowrap">
        {{localize "CPR.dialog.installCyberware.static"}} {{localize "CPR.dialog.installCyberware.humanityLoss"}}
    </div>
    <div class="item flexrow setting-value text-nowrap item-end">
        {{#if this.editable}}
            <input name="data.humanityLoss.static" class="" type="text" value="{{data.data.humanityLoss.static}}">
        {{else}}
            <span class="text-flex-end">{{data.data.humanityLoss.static}}</span>
        {{/if}}
    </div>
</li>

{{!- Rolled Humanity Loss Settings --}}
<li class="item flexrow">
    <div class="item flexrow setting-name text-nowrap">
        {{localize "CPR.itemSheet.cyberware.rolled"}} {{localize "CPR.dialog.installCyberware.humanityLoss"}}
    </div>
    <div class="item flexrow setting-value text-nowrap item-end">
        {{#if this.editable}}
            <input name="data.humanityLoss.roll" class="" type="text" value="{{data.data.humanityLoss.roll}}">
        {{else}}
            <span class="text-flex-end">{{data.data.humanityLoss.roll}}</span>
        {{/if}}
    </div>
</li>

{{#unless (cprListContains "fashionware,cyberwareExternal" data.data.type)}}
    {{!- Foundational Requirement Settings --}}
    <li class="item flexrow">
        <div class="item flexrow setting-name text-nowrap">
            {{localize "CPR.itemSheet.cyberware.requiresFoundational"}}
        </div>
        <div class="item flexrow setting-value text-nowrap item-end">
            {{#if this.editable}}
                {{#if data.data.isFoundational}}
                    <a class="item-checkbox" data-target="data.isFoundational"><i class="far fa-circle"></i></a>
                {{else}}
                    <a class="item-checkbox" data-target="data.isFoundational"><i class="far fa-check-circle"></i></a>
                {{/if}}
            {{else}}
                {{#if data.data.isFoundational}}
                    <i class="far fa-circle"></i>
                {{else}}
                    <i class="far fa-check-circle"></i>
                {{/if}}
            {{/if}}
        </div>
    </li>
    {{#if data.data.isFoundational}}
        {{!- Option Slots for Foundational Settings --}}
        <li class="item flexrow">
            <div class="item flexrow setting-name text-nowrap">
                {{localize "CPR.itemSheet.cyberware.hasOptionSlots"}}
            </div>
            <div class="item flexrow setting-value text-nowrap item-end">
                {{#if this.editable}}
                    {{#if data.data.hasOptionalSlots}}
                        <a class="item-checkbox" data-target="data.hasOptionalSlots"><i class="far fa-check-circle"></i></a>
                    {{else}}
                        <a class="item-checkbox" data-target="data.hasOptionalSlots"><i class="far fa-circle"></i></a>
                    {{/if}}
                {{else}}
                    {{#if data.data.hasOptionalSlots}}
                        <i class="far fa-check-circle"></i>
                    {{else}}
                        <i class="far fa-circle"></i>
                    {{/if}}
                {{/if}}
            </div>
        </li>
    {{else}}
        {{!- Installation Size Settings --}}
        <li class="item flexrow">
            <div class="item flexrow setting-name text-nowrap">
                {{localize "CPR.itemSheet.cyberware.slotSize"}}
            </div>
            <div class="item flexrow setting-value text-nowrap item-end">
                {{#if this.editable}}
                    <input name="data.size" class="" type="number" value="{{data.data.size}}">
                {{else}}
                    <span class="text-flex-end">{{data.data.size}}</span>
                {{/if}}
            </div>
        </li>
    {{/if}}
    {{#if data.data.hasOptionalSlots}}
        {{!- Number of option slots Settings --}}
        <li class="item flexrow">
            <div class="item flexrow setting-name text-nowrap">
                {{localize "CPR.itemSheet.cyberware.optionalSlots"}}
            </div>
            <div class="item flexrow setting-value text-nowrap item-end">
                {{#if this.editable}}
                    <input name="data.optionSlots" class="" type="text" value="{{data.data.optionSlots}}">
                {{else}}
                    <span class="text-flex-end">{{data.data.optionSlots}}</span>
                {{/if}}
            </div>
        </li>
    {{/if}}
    {{!- Is A Weapon Settings --}}
    <li class="item flexrow">
        <div class="item flexrow setting-name text-nowrap">
            {{localize "CPR.itemSheet.common.isAWeapon"}}
        </div>
        <div class="item flexrow setting-value text-nowrap item-end">
            {{#if this.editable}}
                {{#if data.data.isWeapon}}
                    <a class="item-checkbox" data-target="data.isWeapon"><i class="far fa-check-circle"></i></a>
                {{else}}
                    <a class="item-checkbox" data-target="data.isWeapon"><i class="far fa-circle"></i></a>
                {{/if}}
            {{else}}
                {{#if data.data.isWeapon}}
                    <i class="far fa-check-circle"></i>
                {{else}}
                    <i class="far fa-circle"></i>
                {{/if}}
            {{/if}}
        </div>
    </li>
    {{#if data.data.isWeapon}}
      {{> "systems/cyberpunk-red-core/templates/item/settings/mixin/cpr-attackable.hbs" this}}
    {{/if}}
{{/unless}}
{{cprTrace "END CPR-CYBERWARE.HBS"}}
