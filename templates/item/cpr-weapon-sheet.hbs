{{log "CPR-WEAPON-SHEET.HBS"}}
<form>
    {{!-- Item Header Navigation --}}
    {{> "systems/cyberpunk-red-core/templates/item/parts/cpr-header.hbs"}}
    {{!-- Item Sheet Navigation --}}
    <nav class="cpr-block horizontal fit tabs margin-bottom" data-group="primary">
      <a class="" data-tab="description">{{localize "CPR.description"}}</a>
      <a class="" data-tab="details">{{localize "CPR.details"}}</a>
    </nav>
    {{!-- Item Sheet Body --}}
    <section class="content">
      {{!-- Inventory Tab --}}
      <div class="tab" data-group="primary" data-tab="description">
        {{> "systems/cyberpunk-red-core/templates/item/parts/cpr-description.hbs"}}
      </div>
      <div class="tab" data-group="primary" data-tab="details">
        {{!-- MARKET PRICE INPUT --}}
        <div>
          {{localize "CPR.price"}}: <input name="data.price.market" class="" type="number" value="{{data.price.market}}">
        </div>
        {{!-- ROF INPUT --}}
        <div>
          {{localize "CPR.rof"}}: <input name="data.rof" class="" type="number" value="{{data.rof}}">
        </div>
        {{!-- CONCEALABLE CHECKBOX --}}
        <div>
          <label class="label-text">Concealable</label>
          {{#if data.concealable}}
          <a class="item-checkbox" data-target="data.concealable"><i class="far fa-check-circle"></i></a>
          {{else}}
          <a class="item-checkbox" data-target="data.concealable"><i class="far fa-circle"></i></a>
          {{/if}}
        </div>
        {{!-- WEAPON TYPE DROPDOWN --}}
        <div>
          {{localize "CPR.weapon"}} {{localize "CPR.type"}}:
          <select name="data.weaponType" data-dtype="{{data.weaponType}}">
            {{#select data.weaponType}}
            <option value="">{{localize "CPR.na"}}</option>
            {{#each (findConfigObj "weaponTypeList") as |type t|}}
            <option value="{{t}}">{{localize type}}</option>
            {{/each}}
            {{/select}}
          </select>
        </div>
        {{!-- WEAPON SKILL DROPDOWN --}}
        <div>
          {{localize "CPR.weapon"}} {{localize "CPR.skill"}}:
          <select name="data.weaponSkill" data-dtype="{{data.weaponSkill}}">
            {{#select data.weaponSkill}}
            <option value="">{{localize "CPR.na"}}</option>
            {{!-- Would be nice if this was sorted, but not sure how to do that. --}}
            {{#each (getProp this.filteredItems 'skill') as |skillOption| }}
            {{#contains skillOption.data.data.category "rangedweaponSkills,fightingSkills"}}
            <option value="{{skillOption.data.name}}">{{skillOption.data.name}}</option>
            {{/contains}}
            {{/each}}
            {{/select}}
          </select>
        </div>
        {{!-- WEAPON QUALITY --}}
        <div>
          {{localize "CPR.weapon"}} {{localize "CPR.quality"}}:
          <select name="data.quality" data-dtype="{{data.quality}}">
            {{#select data.quality}}
            <option value="standard">{{localize "CPR.standard"}}</option>
            <option value="excellent">{{localize "CPR.excellent"}}</option>
            <option value="poor">{{localize "CPR.poor"}}</option>
            {{/select}}
          </select>
        </div>
        {{!-- DAMAGE INPUT --}}
        <div>
          {{localize "CPR.damage"}}: <input name="data.damage" class="" type="text" value="{{data.damage}}">
        </div>
        {{!-- # HANDS REQ INPUT --}}
        <div>
          {{localize "CPR.handsrequired"}}: <input name="data.handsReq" class="" type="number" value="{{data.handsReq}}">
        </div>
        {{!-- IS RANGED CHECKBOX --}}
        <div>
          <label class="label-text">{{localize "CPR.rangedweapon"}}</label>
          {{#if data.isRanged}}
          <a class="item-checkbox" data-target="data.isRanged"><i class="far fa-check-circle"></i></a>
          {{else}}
          <a class="item-checkbox" data-target="data.isRanged"><i class="far fa-circle"></i></a>
          {{/if}}
        </div>
        {{#if data.isRanged}}
        {{!-- # ALT FIRE MODES INPUT --}}
        <div>
          {{localize "CPR.altfiremodes"}}: <input name="data.altFireModes" class="" type="text" value="{{data.altFireModes}}">
        </div>
        {{!-- # MAG SIZE INPUT --}}
        <div>
          {{localize "CPR.magazine"}} {{localize "CPR.size"}}: <input name="data.magazine.max" class="" type="number" value="{{data.magazine.max}}">
        </div>
        {{/if}}
        {{!-- EQUIPPED --}}
          <div>
            <label class="label-text">{{localize "CPR.equipped"}}</label>
            <select name="data.equippable.equipped" data-dtype="{{data.equippable.equipped}}">
              {{#select data.equippable.equipped}}
              {{#each (findConfigObj "equipped") as |vic v|}}
              <option value="{{v}}">{{localize vic}}</option>
              {{/each}}
              {{/select}}
            </select>
          </div>
      </div>
    </section>
  </form>
{{log "CPR-WEAPON-SHEET.HBS"}}