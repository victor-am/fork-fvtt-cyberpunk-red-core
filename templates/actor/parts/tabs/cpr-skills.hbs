{{log "CPR-SKILLS.HBS"}}
<div class="dynamic-list columns">
  {{!-- Let's add Role Skills here to make rolling them easier --}}

  {{!-- FOR ALL SKILL ITEMS, RENDER SKILL CARD --}}
  {{!-- FOR EACH CATEGORY --}}
  {{#each (findConfigObj "skillCategories") as |category c|}}
  <div class="collapsible">
    <div class="row flex-end skills header white-fg black-bg bold expand-button" id="skillTab-{{c}}">
      <span class="collapse-icon hide"><i class="fas fa-angle-double-down"></i></span>
      <span class="section width-grow skill-name hide-overflow">{{localize (findConfigValue "skillCategories" c)}}</span>
      <span class="section width-eighth no-grow center-text">{{localize "CPR.level"}}</span>
      <span class="section width-eighth no-grow center-text">{{localize "CPR.base"}}</span>
    </div>
    {{#each (sort ../actor.filteredItems.skill "name") as |skill s|}}
    {{!-- IF SKILL IS OF CATEGORY --}}
    {{#if (eq skill.data.category c)}}
    {{!-- DISPLAY SKILL --}}
    <div class="row flex-end skill item black-fg white-bg{{#if skill.data.favorite}} favorite{{/if}}" data-item-id="{{skill._id}}" data-skill-category="{{skill.data.category}}">
      <div class="section width-grow width-shrink skill-name hide-overflow ws-nowrap">
        <a class="rollable {{#if skill.data.basic}}bold{{/if}}" data-roll-type="skill" data-roll-title="{{skill.name}}">
          {{skill.name}} {{#if (eq skill.data.difficulty "difficult")}}(x2) {{/if}}<strong>({{localize (findConfigValue
            "statList" skill.data.stat)}})</strong>
        </a>
        <a class="item-action" data-action-type="favorite">
        {{log skill}}
        {{#if skill.data.favorite}}
        <i class="fas fa-star favorite"></i>
        {{else}}
        <i class="far fa-star"></i>
        {{/if}}
        </a>
        {{#if (eq skill.data.core false)}}
        <a class="item-edit"><i class="fas fa-edit"></i></a>
        <a class="item-action" data-action-type="delete"><i class="fas fa-trash-alt"></i></a>
        {{/if}}
      </div>
      <div class="section width-eighth width-no-shrink skill-level center-text"><input class="number skill-level-input"
          value="{{skill.data.level}}" type="number" data-item-prop="data.level" data-dtype="Number"></div>
      <div class="section width-eighth width-no-shrink skill-base center-text">{{math "sum" skill.data.level (lookup
        (getProp ../../actor.data.stats skill.data.stat)
        'value')}}</div>
    </div>
    {{/if}}
    {{/each}}
  </div>
  {{/each}}
</div>
{{log "END CPR-SKILLS.HBS"}}