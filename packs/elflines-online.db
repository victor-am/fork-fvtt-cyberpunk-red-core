{"name":"Create an Elflines Online Character","type":"script","author":"3nEUs5uA2hnqUiAe","img":"icons/svg/dice-target.svg","scope":"global","command":"// Set the following to the name of your character to be created\nconst actorName = \"ElfLine\";\n\n// All Elf Online Skills\nconst skills = {\n\"Animal Handling\": { stat: \"emp\", category: \"performanceSkills\", difficulty: \"typical\", },\n\"Language (Elven)\": { stat: \"int\", category: \"educationSkills\", difficulty: \"typical\", },\n\"Archery\": { stat: \"ref\", category: \"rangedweaponSkills\", difficulty: \"difficult\", },\n\"Melee Weapon\": { stat: \"dex\", category: \"fightingSkills\", difficulty: \"difficult\", },\n\"Athletics/Contortionist\": { stat: \"dex\", category: \"bodySkills\", difficulty: \"typical\", },\n\"Perception\": { stat: \"int\", category: \"awarenessSkills\", difficulty: \"typical\", },\n\"Basic Tech/Weaponstech\": { stat: \"tech\", category: \"techniqueSkills\", difficulty: \"typical\", },\n\"Persuasion/Trading\": { stat: \"cool\", category: \"socialSkills\", difficulty: \"typical\", },\n\"Brawling\": { stat: \"dex\", category: \"fightingSkills\", difficulty: \"typical\", },\n\"Pick Lock/Pick Pocket\": { stat: \"tech\", category: \"techniqueSkills\", difficulty: \"typical\", },\n\"Conceal/Reveal Object\": { stat: \"int\", category: \"awarenessSkills\", difficulty: \"typical\", },\n\"Pilot Sea Vehicle\": { stat: \"tech\", category: \"controlSkills\", difficulty: \"typical\", },\n\"Composition/Education\": { stat: \"int\", category: \"educationSkills\", difficulty: \"typical\", },\n\"Play Instrument\": { stat: \"tech\", category: \"performanceSkills\", difficulty: \"typical\", },\n\"Concentration\": { stat: \"will\", category: \"awarenessSkills\", difficulty: \"typical\", },\n\"Riding\": { stat: \"emp\", category: \"controlSkills\", difficulty: \"typical\", },\n\"Endurance/Resist Torture/Drugs\": { stat: \"will\", category: \"bodySkills\", difficulty: \"typical\", },\n\"Stealth\": { stat: \"dex\", category: \"bodySkills\", difficulty: \"typical\", },\n\"Evasion/Dance\": { stat: \"dex\", category: \"fightingSkills\", difficulty: \"difficult\", },\n\"Tracking\": { stat: \"int\", category: \"awarenessSkills\", difficulty: \"typical\", },\n\"First Aid/Paramedic/Surgery\": { stat: \"tech\", category: \"techniqueSkills\", difficulty: \"difficult\", },\n\"Wilderness Survival\": { stat: \"int\", category: \"educationSkills\", difficulty: \"typical\", },\n};\n\n// Create Elf Online Character\nconst elfCharacter = await Actor.create({\n          name: actorName,\n          type: \"character\",\n});\n\nconst skillList = [];\nObject.keys(skills).forEach(async (name) => {\n   const stat = skills[name].stat;\n   const category = skills[name].category;\n   const difficulty = skills[name].difficulty;\n   const itemData = {\n      type: \"skill\",\n      name,\n      data: {\n            stat,\n            category,\n            difficulty,\n            core: false,\n            },\n      };\n   skillList.push(itemData);\n});\n\n// Create Elf Online Skills\nconst createdSkills = await elfCharacter.createEmbeddedDocuments(\"Item\", skillList, { force: true });\n\n// Create array to update and set core to true to prevent deletion\nconst coreSkills = [];\ncreatedSkills.forEach((skill) => {\n   if (skill.name !== \"Language (Elven)\" ) {\n      coreSkills.push({ _id: skill.id, \"data.core\": true });\n   }\n});\n\nelfCharacter.updateEmbeddedDocuments(\"Item\", coreSkills );","folder":null,"sort":0,"permission":{"default":0,"5r9ayK5zRFrpL90O":3,"3nEUs5uA2hnqUiAe":3},"flags":{"core":{"sourceId":"Macro.H7Oo6dSOkNtTgu5K"}},"_id":"LF9tUG2mi1fxyxrP"}
{"name":"Create Elflines Online Armory","type":"script","author":"3nEUs5uA2hnqUiAe","img":"icons/svg/dice-target.svg","scope":"global","command":"// Get all packs as a basis for the equivalency items\nconst armorPack = game.packs.get(\"cyberpunk-red-core.armor-items\");\nconst weaponPack = game.packs.get(\"cyberpunk-red-core.weapons-items\");\nconst ammoPack = game.packs.get(\"cyberpunk-red-core.ammo-items\");\nconst gearPack = game.packs.get(\"cyberpunk-red-core.gear-items\");\n\nconst armorContent = await armorPack.getDocuments();\nconst weaponContent = await weaponPack.getDocuments();\nconst ammoContent = await ammoPack.getDocuments();\nconst gearContent = await gearPack.getDocuments();\n\n// Identify/Create folder for items\nconst folderList = game.folders.filter((folder) => folder.name === \"Elflines Online Armory\" && folder.type === \"Item\");\nconst elOnlineArmoryFolder = (folderList.length === 1) ? folderList[0] : await Folder.create({ name: \"Elflines Online Armory\", type: \"Item\" });\n\n// Identify the items of Elflines Online\nconst armoryItems = {\n  \"Leather Armor\": {\n    type: \"armor\",\n    equivalent: \"Leathers (Body)\",\n    price: 20,\n    img: \"icons/equipment/chest/breastplate-layered-leather-brown.webp\",\n  },\n  \"Studded Leather Armor\": {\n    type: \"armor\",\n    equivalent: \"Kevlar (Body)\",\n    price: 50,\n    img: \"icons/equipment/chest/breastplate-layered-leather-studded-black.webp\",\n  },\n  \"Chainmail Armor\": {\n    type: \"armor\",\n    equivalent: \"Medium Armorjack (Body)\",\n    price: 100,\n    img: \"icons/equipment/chest/breastplate-scale-grey.webp\",\n  },\n  \"Full Plate Armor\": {\n    type: \"armor\",\n    equivalent: \"Flak (Body)\",\n    price: 500,\n    img: \"icons/equipment/chest/breastplate-banded-steel-gold.webp\",\n  },\n  \"Shield\": {\n    type: \"armor\",\n    equivalent: \"Bullet Proof Shield\",\n    price: 100,\n    img: \"icons/equipment/shield/buckler-wooden-boss-brown.webp\",\n  },\n  \"Dagger\": {\n    type: \"weapon\",\n    equivalent: \"Combat Knife\",\n    price: 50,\n    img: \"icons/weapons/daggers/dagger-straight-blue.webp\",\n  },\n  \"Shortsword\": {\n    type: \"weapon\",\n    equivalent: \"Crowbar\",\n    price: 50,\n    img: \"icons/weapons/swords/shortsword-guard-gold.webp\",\n  },\n  \"Longsword\": {\n    type: \"weapon\",\n    equivalent: \"Lead Pipe\",\n    price: 100,\n    rof: 1,\n    img: \"icons/weapons/swords/greatsword-crossguard-steel.webp\",\n  },\n  \"Greataxe\": {\n    type: \"weapon\",\n    equivalent: \"Naginata\",\n    price: 500,\n    hands: 2,\n    img: \"icons/weapons/axes/axe-double-black.webp\",\n  },\n  \"Bow\": {\n    type: \"weapon\",\n    equivalent: \"Bow\",\n    price: 100,\n    img: \"icons/weapons/bows/shortbow-recurve-red.webp\",\n  },\n  \"Arrow\": {\n    type: \"ammo\",\n    equivalent: \"Basic Arrow\",\n    price: 1,\n    img: \"icons/weapons/ammunition/arrow-broadhead.webp\",\n  },\n  \"Poison Arrow\": {\n    type: \"ammo\",\n    equivalent: \"Poison Arrow\",\n    price: 10,\n    img: \"icons/weapons/ammunition/arrow-broadhead-green.webp\",\n  },\n  \"Vial of Poison\": {\n    type: \"gear\",\n    equivalent: \"Vial of Poison\",\n    price: 100,\n    img: \"icons/consumables/potions/bottle-conical-corked-labeled-skull-poison-green.webp\",\n  },\n  \"Sacred Herbs\": {\n    type: \"gear\",\n    equivalent: \"None\",\n    price: 50,\n    img: \"icons/consumables/plants/herb-tied-bundle-dried-yellow.webp\",\n  },\n};\n\n// Create each item in folder\nObject.keys(armoryItems).forEach(async (itemName) => {\n\n  const itemType = armoryItems[itemName].type;\n  const cprItem = armoryItems[itemName].equivalent;\n  const price =  armoryItems[itemName].price;\n  const img = armoryItems[itemName].img;\n  let itemSearch;\n  if (cprItem !== \"None\") {\n\n    switch (itemType) {\n      case \"weapon\": {\n        itemSearch = weaponContent.filter((i) => i.name === cprItem);\n        break;\n      }\n      case \"armor\": {\n        itemSearch = armorContent.filter((i) => i.name === cprItem);\n        break;\n      }\n      case \"gear\": {\n        itemSearch = gearContent.filter((i) => i.name === cprItem);\n        break;\n      }\n      case \"ammo\": {\n        itemSearch = ammoContent.filter((i) => i.name === cprItem);\n        break;\n      }\n      default:\n    }\n  }\n\n  if (typeof itemSearch !== \"undefined\" && itemSearch.length === 1) {\n    const sourceItem = itemSearch[0];\n    const itemData = duplicate(sourceItem.data);\n    itemData.name =  itemName;\n    itemData.data.price.market = price;\n    itemData.folder = elOnlineArmoryFolder;\n    itemData.img = img;\n    await Item.create(itemData);\n  } else {\n    const itemData = {\n      name: itemName,\n      type: \"gear\",\n      folder: elOnlineArmoryFolder.id,\n      \"data.price.market\": price,\n      img: img,\n    };\n    await Item.create(itemData);\n  }\n});","folder":null,"sort":0,"permission":{"default":0,"5r9ayK5zRFrpL90O":3,"3nEUs5uA2hnqUiAe":3},"flags":{"core":{"sourceId":"Macro.we8ivu23VbWQr0jj"}},"_id":"Oyiup1NieiHZDgJ3"}
